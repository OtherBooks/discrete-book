<!--**************************************-->
<!--* Generated from MathBook XML source *-->
<!--*    on 2016-07-04T00:22:00Z    *-->
<!--*                                    *-->
<!--*   http://mathbook.pugetsound.edu   *-->
<!--*                                    *-->
<!--**************************************-->
<div class="remark-like">
<h5 class="heading">
<span class="type">Solution</span><span class="codenumber">3.6.5.1</span>
</h5>
<p>
We are counting derangements on 5 elements. There are \(5!\) ways for the gentlemen to grab hats in any order - but many of these permutations will result in someone getting their own hat. So we subtract all the ways in which one or more of the men get their own hat. In other words, we subtract the non-derangements. Doing so requires PIE. Thus the answer is:
\begin{equation*}
  5! - \left[{5 \choose 1}4! - {5 \choose 2}3! + {5 \choose 3}2! - {5 \choose 4}1! + {5 \choose 5}0!\right].
\end{equation*}
</p>
</div><span class="incontext"><a href="sec_advPIE.html#solution-34">in-context</a></span>
